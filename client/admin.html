<!doctype html>
<html lang="pt-BR">
  <head>
    <meta charset="utf-8" />
    <title>DARAH · Admin</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" href="styles.css" />
    <style>
      /* Admin helpers built on the shared theme */
      .admin-main{max-width:1180px;margin:24px auto 40px;padding:0 20px}
      .admin-status{margin-top:6px;font-size:12px;color:var(--text-muted)}
      .admin-status.ok{color:#2e7d32}
      .admin-status.error{color:var(--error)}
      .admin-login{max-width:420px;margin:40px auto}
      .admin-login-subtitle{margin:0 0 18px;font-size:13px;color:var(--text-muted)}
      .admin-login-error{display:none}
      .admin-panel{display:none}

      /* Loading welcome */
      .admin-loading-section{display:none;justify-content:center;align-items:center;margin-top:40px}
      .admin-loading-card{text-align:center}
      .loading-circle-wrapper{display:flex;justify-content:center;align-items:center;padding:24px 0}
      .loading-circle{position:relative;width:160px;height:160px;border-radius:50%;display:flex;align-items:center;justify-content:center;overflow:hidden}
      .loading-circle-fill{position:absolute;inset:0;border-radius:50%;background:conic-gradient(var(--accent-blue) 0deg,#f0f0f0 0deg);transform:rotate(-90deg);animation:loadingFill 4s linear forwards}
      .loading-circle-inner{position:absolute;inset:16px;border-radius:50%;background:var(--card-bg)}
      .loading-circle-message{position:relative;z-index:2;font-size:14px;font-weight:600;color:var(--text-main);padding:0 12px}
      @keyframes loadingFill{from{background:conic-gradient(var(--accent-blue) 0deg,#f0f0f0 0deg)}to{background:conic-gradient(var(--accent-blue) 360deg,#f0f0f0 0deg)}}

      /* Admin product grid mirrors storefront */
      .admin-product-grid{display:grid;grid-template-columns:repeat(4,minmax(0,1fr));gap:20px}
      @media (max-width:900px){.admin-product-grid{grid-template-columns:repeat(2,minmax(0,1fr))}}
      @media (max-width:640px){.admin-product-grid{grid-template-columns:minmax(0,1fr)}}

      .admin-product-card{background:var(--card-bg);border-radius:18px;overflow:hidden;box-shadow:var(--shadow-soft);display:flex;flex-direction:column;border:1px solid rgba(0,0,0,0.02)}
      .admin-product-card.add-card{border-style:dashed;border-color:var(--accent-soft);background:#f7f7f7;color:var(--text-muted);align-items:center;justify-content:center;text-align:center}
      .add-card-inner{padding:20px 16px 22px;display:flex;flex-direction:column;align-items:center;gap:8px}
      .add-card-icon{width:40px;height:40px;border-radius:999px;border:1px solid var(--accent-soft);display:flex;align-items:center;justify-content:center;font-size:24px}
      .admin-product-actions-row{display:flex;gap:8px;justify-content:space-between;margin-top:8px}
      .admin-button-secondary{border-radius:999px;border:1px solid var(--border-soft);padding:6px 10px;font-size:12px;background:#f4f4f4;cursor:pointer}
      .admin-button-secondary:hover{background:#ececec}

      /* Home preview mirrors storefront hero */
      .hero-admin-note{margin:10px 0 0;font-size:12px;color:var(--text-muted)}
      .notice-row{display:flex;gap:8px;align-items:center;margin-top:8px}
      .notice-row input{flex:1}
    </style>
  </head>
  <body>
    <!-- Header identical to storefront -->
    <header class="site-header">
      <div class="brand-bar">
        <span class="brand-name">DARAH</span>
      </div>
      <nav class="main-nav">
        <div class="nav-left">
          <button class="nav-link active" data-view="home">Início</button>
          <button class="nav-link" data-view="rings">Anéis</button>
          <button class="nav-link" data-view="necklaces">Colares</button>
          <button class="nav-link" data-view="bracelets">Pulseiras</button>
          <button class="nav-link" data-view="earrings">Brincos</button>
        </div>
        <div>
          <span class="admin-badge-top">Painel administrativo privado</span>
        </div>
      </nav>
    </header>

    <main class="main-content">
      <!-- Login -->
      <section id="adminLoginSection" class="admin-login">
        <h1 class="section-title" style="margin-top:0">Acesso administrativo</h1>
        <p class="admin-login-subtitle">Digite seu usuário e senha para entrar no painel da DARAH.</p>

        <div class="admin-field">
          <label for="adminUsername" class="admin-label">Usuário</label>
          <input id="adminUsername" class="admin-input" type="text" autocomplete="username" />
        </div>

        <div class="admin-field">
          <label for="adminPassword" class="admin-label">Senha</label>
          <input id="adminPassword" class="admin-input" type="password" autocomplete="current-password" />
        </div>

        <button id="adminLoginButton" class="primary-button">Entrar</button>
        <p id="adminLoginError" class="admin-status admin-login-error error"></p>
      </section>

      <!-- Loading / welcome -->
      <section id="adminLoadingSection" class="admin-loading-section" aria-hidden="true">
        <div class="admin-card admin-loading-card">
          <p class="home-highlight-text">Preparando o painel administrativo.</p>
          <div class="loading-circle-wrapper">
            <div class="loading-circle">
              <div class="loading-circle-fill"></div>
              <div class="loading-circle-inner"></div>
              <div class="loading-circle-message" id="adminWelcomeMessage">Bem-vinda!</div>
            </div>
          </div>
        </div>
      </section>

      <!-- Authenticated admin panel with same views as storefront -->
      <section id="adminPanelSection" class="admin-panel">
        <!-- HOME VIEW -->
        <section id="view-home" class="view active-view">
          <div class="hero">
            <div class="hero-images" id="adminHeroGallery"><!-- images go here --></div>
            <div class="hero-about">
              <h2 class="hero-title">Joias DARAH</h2>
              <p class="hero-text">
                <textarea id="adminAboutText" class="admin-textarea" placeholder="História, valores e identidade da DARAH"></textarea>
              </p>
              <p class="hero-admin-note">As alterações aparecem na vitrine pública após salvar.</p>
              <div style="margin-top:10px">
                <input id="adminHeroImagesFile" type="file" accept="image/*" multiple style="display:none" />
                <button type="button" id="adminHeroImagesFileButton" class="admin-button-secondary">Escolher fotos do dispositivo</button>
                <button id="saveHomepageBtn" class="primary-button" style="margin-left:8px">Salvar página inicial</button>
                <p id="adminHomepageStatus" class="admin-status"></p>
                <!-- hidden textarea preserved to keep API shape -->
                <textarea id="adminHeroImages" class="admin-textarea" style="display:none"></textarea>
              </div>

              <!-- Notices -->
              <div style="margin-top:12px">
                <div class="notice-row">
                  <span class="admin-label" style="margin:0">Avisos do site</span>
                  <button type="button" id="adminAddNoticeBtn" class="admin-button-secondary">Adicionar aviso</button>
                </div>
                <div id="adminNoticeList"></div>
              </div>
            </div>
          </div>

          <div class="home-highlight" style="margin-top:24px">
            <h2>Seleção em destaque</h2>
            <p class="home-highlight-text">Explore nossas coleções de anéis, colares, pulseiras e brincos.</p>
          </div>
        </section>

        <!-- CATEGORY VIEWS -->
        <section id="view-rings" class="view">
          <h2 class="section-title">Anéis</h2>
          <div id="grid-rings" class="admin-product-grid"></div>
        </section>

        <section id="view-necklaces" class="view">
          <h2 class="section-title">Colares</h2>
          <div id="grid-necklaces" class="admin-product-grid"></div>
        </section>

        <section id="view-bracelets" class="view">
          <h2 class="section-title">Pulseiras</h2>
          <div id="grid-bracelets" class="admin-product-grid"></div>
        </section>

        <section id="view-earrings" class="view">
          <h2 class="section-title">Brincos</h2>
          <div id="grid-earrings" class="admin-product-grid"></div>
        </section>

        <!-- Hidden form to preserve current API for create and edit -->
        <form id="productForm" style="display:none">
          <select id="productCategory" class="admin-select" required>
            <option value="rings">Anéis</option>
            <option value="necklaces">Colares</option>
            <option value="bracelets">Pulseiras</option>
            <option value="earrings">Brincos</option>
          </select>
          <input id="productName" type="text" />
          <textarea id="productDescription"></textarea>
          <input id="productPrice" type="number" step="0.01" min="0" />
          <input id="productStock" type="number" min="0" />
          <input id="productImageUrl" type="text" />
          <input id="productImageFile" type="file" accept="image/*" />
          <button type="submit">Salvar</button>
          <p id="adminProductFormStatus" class="admin-status"></p>
        </form>
      </section>
    </main>

    <footer class="site-footer">
      <p>© 2025 DARAH All rights reserved</p>
    </footer>

    <script src="admin.js"></script>
  </body>
</html>
